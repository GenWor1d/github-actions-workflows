# GitHub Actions å¯é‡ç”¨å·¥ä½œæµ

æœ¬ç›®å½•åŒ…å«å¯åœ¨å…¶ä»–é¡¹ç›®ä¸­é‡å¤ä½¿ç”¨çš„ GitHub Actions å·¥ä½œæµæ¨¡æ¿ï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œç”¨äºç®€åŒ– CI/CD é…ç½®ã€‚

## ğŸ“‹ å·¥ä½œæµåˆ—è¡¨

### ğŸš€ ä¸»éƒ¨ç½²å·¥ä½œæµ (deploy.yml)
**ä¸»å…¥å£å·¥ä½œæµ**ï¼Œç»„åˆè°ƒç”¨æ‰€æœ‰å­å·¥ä½œæµå®Œæˆå®Œæ•´éƒ¨ç½²æµç¨‹ã€‚

### ğŸ”§ å­å·¥ä½œæµæ¨¡å—

#### ç¯å¢ƒè®¾ç½® (setup-env.yml)
- è‡ªåŠ¨ç”Ÿæˆé•œåƒæ ‡ç­¾ï¼ˆåŒ…å«æ—¶é—´æˆ³ï¼‰
- è®¾ç½®é¡¹ç›®åç§°ã€åˆ†æ”¯åç§°ã€ç½‘ç»œåç§°ç­‰ç¯å¢ƒå˜é‡
- ä¸ºåç»­æ­¥éª¤æä¾›ç»Ÿä¸€çš„ç¯å¢ƒé…ç½®

#### Dockerç½‘ç»œç®¡ç† (docker-network.yml)
æ”¯æŒçš„ç½‘ç»œæ“ä½œï¼š
- `create`: åˆ›å»ºDockerç½‘ç»œï¼ˆå¦‚ä¸å­˜åœ¨ï¼‰
- `delete`: åˆ é™¤Dockerç½‘ç»œ
- `list`: åˆ—å‡ºç½‘ç»œä¿¡æ¯

#### Dockeré•œåƒç®¡ç† (docker-image.yml)
æ”¯æŒçš„é•œåƒæ“ä½œï¼š
- `build`: æ„å»ºDockeré•œåƒ
- `cleanup`: æ¸…ç†æ—§é•œåƒï¼ˆå¯é…ç½®ä¿ç•™æ•°é‡ï¼‰

#### Dockerå®¹å™¨ç®¡ç† (docker-container.yml)
æ”¯æŒçš„å®¹å™¨æ“ä½œï¼š
- `deploy`: éƒ¨ç½²å®¹å™¨ï¼ˆå…ˆå¯åŠ¨æ–°å®¹å™¨ï¼ŒéªŒè¯åæ›¿æ¢æ—§å®¹å™¨ï¼‰
- `stop`: åœæ­¢å¹¶åˆ é™¤å®¹å™¨
- `restart`: é‡å¯å®¹å™¨
- `status`: æ£€æŸ¥å®¹å™¨è¿è¡ŒçŠ¶æ€

## ğŸ“– è¾“å…¥å‚æ•°

### ä¸»éƒ¨ç½²å·¥ä½œæµ (deploy.yml)

| å‚æ•°å | ç±»å‹ | æè¿° | é»˜è®¤å€¼ | å¿…é¡» |
|-------|------|------|--------|------|
| branch | string | éƒ¨ç½²åˆ†æ”¯ | ${{ github.ref_name }} | å¦ |
| working-directory | string | å·¥ä½œç›®å½•è·¯å¾„ | deployment | å¦ |
| enable-cleanup | boolean | æ˜¯å¦å¯ç”¨é•œåƒæ¸…ç† | true | å¦ |
| keep-latest | number | ä¿ç•™æœ€æ–°é•œåƒæ•°é‡ | 3 | å¦ |

### å­å·¥ä½œæµå‚æ•°è¯¦æƒ…

è¯·å‚è€ƒå„ä¸ªå­å·¥ä½œæµæ–‡ä»¶ä¸­çš„å‚æ•°å®šä¹‰ã€‚

## ğŸ“¤ è¾“å‡ºå‚æ•°

| å‚æ•°å | ç±»å‹ | æè¿° |
|-------|------|------|
| image-tag | string | ç”Ÿæˆçš„é•œåƒæ ‡ç­¾ |
| project-name | string | é¡¹ç›®åç§° |
| network-name | string | ç½‘ç»œåç§° |

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬éƒ¨ç½²
```yaml
name: éƒ¨ç½²é¡¹ç›®
on:
  push:
    branches:
      - main
      - dev

jobs:
  deploy:
    uses: your-username/github-actions-workflows/.github/workflows/deploy.yml@main
    with:
      branch: ${{ github.ref_name }}
      working-directory: deployment
```

### è‡ªå®šä¹‰é…ç½®
```yaml
name: è‡ªå®šä¹‰éƒ¨ç½²
on:
  workflow_dispatch:

jobs:
  deploy:
    uses: your-username/github-actions-workflows/.github/workflows/deploy.yml@main
    with:
      branch: 'staging'
      working-directory: 'app-deployment'
      enable-cleanup: true
      keep-latest: 5
```

### å•ç‹¬ä½¿ç”¨å­å·¥ä½œæµ
```yaml
# ä»…æ„å»ºé•œåƒ
jobs:
  build-image:
    uses: ./.github/workflows/docker-image.yml@main
    with:
      working-directory: 'frontend'
      action: 'build'

# ä»…ç®¡ç†å®¹å™¨
  manage-container:
    uses: ./.github/workflows/docker-container.yml@main
    with:
      working-directory: 'backend'
      action: 'restart'
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
deploy.yml (ä¸»å·¥ä½œæµ)
â”œâ”€â”€ setup-env.yml (ç¯å¢ƒè®¾ç½®)
â”œâ”€â”€ docker-network.yml (ç½‘ç»œé…ç½®)
â”œâ”€â”€ docker-image.yml (é•œåƒæ„å»º)
â”œâ”€â”€ docker-container.yml (å®¹å™¨éƒ¨ç½²)
â”œâ”€â”€ docker-image.yml (é•œåƒæ¸…ç†)
â””â”€â”€ å®Œæˆé€šçŸ¥
```

## âœ… æœ€ä½³å®è·µ

1. **æ¨¡å—åŒ–ä½¿ç”¨**: æ ¹æ®éœ€è¦å•ç‹¬è°ƒç”¨å­å·¥ä½œæµï¼Œæé«˜çµæ´»æ€§
2. **ç¯å¢ƒåˆ†ç¦»**: ä¸ºä¸åŒç¯å¢ƒï¼ˆå¼€å‘/æµ‹è¯•/ç”Ÿäº§ï¼‰é…ç½®ä¸åŒå‚æ•°
3. **ç‰ˆæœ¬æ§åˆ¶**: ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ ‡ç­¾å¼•ç”¨å·¥ä½œæµï¼ˆå¦‚ `@v1.0.0`ï¼‰
4. **å®šæœŸæ›´æ–°**: ä¿æŒ GitHub Actions ç‰ˆæœ¬çš„åŠæ—¶æ›´æ–°
5. **ç›‘æ§æ—¥å¿—**: å¯ç”¨å·¥ä½œæµæ—¥å¿—è®°å½•ï¼Œä¾¿äºæ•…éšœæ’æŸ¥

## ğŸ”§ æ•…éšœæ’é™¤

### å·¥ä½œæµæ— æ³•è¿è¡Œ
- æ£€æŸ¥å·¥ä½œæµæ–‡ä»¶æƒé™
- ç¡®ä¿æ‰€æœ‰å¿…éœ€å‚æ•°éƒ½å·²æä¾›
- éªŒè¯ GitHub Actions æƒé™é…ç½®

### éƒ¨ç½²å¤±è´¥
- æ£€æŸ¥ Docker é…ç½®å’Œæƒé™
- éªŒè¯å·¥ä½œç›®å½•è·¯å¾„å’Œ Dockerfile
- æŸ¥çœ‹å­å·¥ä½œæµçš„è¯¦ç»†æ—¥å¿—

### å®¹å™¨é—®é¢˜
- æ£€æŸ¥ `docker-compose.yml` é…ç½®
- éªŒè¯ç«¯å£æ˜ å°„å’Œä¾èµ–æœåŠ¡
- ä½¿ç”¨å®¹å™¨çŠ¶æ€æ£€æŸ¥å·¥ä½œæµè¿›è¡Œè¯Šæ–­

### ç½‘ç»œé—®é¢˜
- ç¡®è®¤ç½‘ç»œé©±åŠ¨å’Œé…ç½®
- æ£€æŸ¥ç½‘ç»œåç§°å†²çª
- éªŒè¯å®¹å™¨ç½‘ç»œè¿æ¥

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°

- **v2.0.0**: æ¨¡å—åŒ–é‡æ„ï¼Œå°†å•ä¸€å·¥ä½œæµæ‹†åˆ†ä¸ºå¤šä¸ªå­å·¥ä½œæµ
- **v1.0.0**: åˆå§‹ç‰ˆæœ¬ï¼Œå•ä¸€å·¥ä½œæµå®ç°